<div class="upload-container" *ngIf="isStudent">
  <mat-card class="upload-card">
    <mat-card-header>
      <mat-card-title>
        <mat-icon>assignment</mat-icon>
        Enviar Tarefa
      </mat-card-title>
      <mat-card-subtitle>
        Envie sua tarefa em PDF para correção
      </mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      <form [formGroup]="uploadForm" (ngSubmit)="onSubmit()" class="upload-form">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Título da Tarefa</mat-label>
          <input 
            matInput 
            formControlName="title"
            placeholder="Ex: Exercícios de Matemática - Capítulo 3"
            maxlength="200">
          <mat-icon matSuffix>title</mat-icon>
          <mat-error *ngIf="title?.hasError('required')">
            Título é obrigatório
          </mat-error>
          <mat-error *ngIf="title?.hasError('maxlength')">
            Título deve ter no máximo 200 caracteres
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Matéria</mat-label>
          <input 
            matInput 
            formControlName="subject"
            placeholder="Ex: Matemática, Português, História..."
            maxlength="100">
          <mat-icon matSuffix>subject</mat-icon>
          <mat-error *ngIf="subject?.hasError('required')">
            Matéria é obrigatória
          </mat-error>
          <mat-error *ngIf="subject?.hasError('maxlength')">
            Matéria deve ter no máximo 100 caracteres
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Descrição (opcional)</mat-label>
          <textarea 
            matInput 
            formControlName="description"
            placeholder="Descreva brevemente o conteúdo da tarefa..."
            rows="3"
            maxlength="1000">
          </textarea>
          <mat-icon matSuffix>description</mat-icon>
          <mat-error *ngIf="description?.hasError('maxlength')">
            Descrição deve ter no máximo 1000 caracteres
          </mat-error>
        </mat-form-field>

        <div class="file-upload-section">
          <label for="fileInput" class="file-upload-label">
            <mat-icon>attach_file</mat-icon>
            <span *ngIf="!selectedFile">Selecionar Arquivo PDF</span>
            <span *ngIf="selectedFile">{{ selectedFile.name }}</span>
          </label>
          <input 
            id="fileInput"
            type="file" 
            (change)="onFileSelected($event)"
            accept=".pdf"
            style="display: none;">
          
          <div class="file-info" *ngIf="selectedFile">
            <p class="file-details">
              <mat-icon>picture_as_pdf</mat-icon>
              {{ selectedFile.name }} ({{ (selectedFile.size / 1024 / 1024).toFixed(2) }} MB)
            </p>
          </div>

          <div class="file-requirements">
            <p class="requirements-text">
              <mat-icon>info</mat-icon>
              Apenas arquivos PDF são aceitos. Tamanho máximo: 10MB
            </p>
          </div>
        </div>

        <div class="form-actions">
          <button 
            mat-stroked-button 
            type="button"
            (click)="goBack()"
            class="back-button">
            <mat-icon>arrow_back</mat-icon>
            Voltar
          </button>
          
          <button 
            mat-raised-button 
            color="primary" 
            type="submit"
            [disabled]="uploadForm.invalid || !selectedFile || isLoading"
            class="upload-button">
            <mat-spinner *ngIf="isLoading" diameter="20" class="button-spinner"></mat-spinner>
            <mat-icon *ngIf="!isLoading">send</mat-icon>
            <span *ngIf="!isLoading">Enviar Tarefa</span>
            <span *ngIf="isLoading">Enviando...</span>
          </button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
</div>
